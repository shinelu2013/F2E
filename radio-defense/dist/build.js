!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=2)}([function(t,e){class n{constructor(t,e){this.x=t,this.y=e}set(t,e){this.x=t,this.y=e}move(t,e){this.x+=t,this.y+=e}add(t){return new n(this.x+t.x,this.y+t.y)}sub(t){return new n(this.x-t.x,this.y-t.y)}mul(t){return new n(this.x*t,this.y*t)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}set length(t){let e=this.unit.mul(t);this.set(e.x,e.y)}clone(){return new n(this.x,this.y)}toString(){return`(${this.x}, ${this.y})`}equal(t){return this.x==t.x&&this.y==t.y}get angle(){return Math.atan2(this.y,this.x)}get unit(){return this.mul(1/this.length)}}t.exports=n},function(t,e){t.exports={ww:0,wh:0,centerX:0,centerY:0,time:0,canvas:void 0,ctx:void 0,images:{},degToPi:0,objectList:[],initBase:function(t){degToPi=Math.PI/180,this.canvas=t,ww=t.width,wh=t.height,centerX=ww/2,centerY=wh/2}}},function(t,e,n){var i=30,o="#001D2E";const s=n(0);var r,a;console.log("******************");var l=0,c=0,h=(Math.PI,"startStage"),d=["startStage","playStage"],u={};function g(){r=document.getElementById("mycanvas"),(a=r.getContext("2d")).circle=function(t,e){a.arc(t.x,t.y,e,0,2*Math.PI)},a.line=function(t,e){a.moveTo(t.x,t.y),a.lineTo(e.x,e.y)},l=r.width=window.innerWidth,c=r.height=window.innerHeight,r.removeEventListener("stageChange",m),r.addEventListener("stageChange",m)}function w(){0}function f(){a.fillStyle=o,a.fillRect(0,0,l,c),a.save(),u[h].draw(a),a.restore(),requestAnimationFrame(f)}let x=0;function m(t){switch(x++,console.log(`call stageChange:${x}`),t.stopPropagation(),h){case"startStage":h="playStage"}}window.addEventListener("load",function(){console.log("loaded"),g(),d.forEach(t=>{console.log("./stages/"+t+".js");let e=n(3)(`./${t}.js`);u[t]=e,u[t].initCanvas(r),console.log(`page:${t} `,u[t])}),requestAnimationFrame(f),setInterval(w,1e3/i)}),window.addEventListener("resize",g);var v=new s(0,0);new s(0,0),new s(0,0);window.addEventListener("mousemove",function(t){v.set(t.x,t.y)}),window.addEventListener("mousedown",function(t){v.set(t.x,t.y),v.clone()}),window.addEventListener("mouseup",function(t){v.set(t.x,t.y),v.clone()}),window.addEventListener("keydown",function(t){var e=t.keyCode?t.keyCode:t.which;console.log(`KeyDown: ${e}`)},!0),window.addEventListener("keyup",function(t){var e=t.keyCode?t.keyCode:t.which;console.log(`KeyUP: ${e}`)},!0)},function(t,e,n){var i={"./baseStage.js":1,"./playStage.js":4,"./startStage.js":5};function o(t){return n(s(t))}function s(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}o.keys=function(){return Object.keys(i)},o.resolve=s,t.exports=o,o.id=3},function(t,e,n){n(0);const i=n(1);t.exports={initCanvas:function(t){Object.assign(this,i),this.initBase(t)},draw:function(t){time++,t.save(),t.translate(centerX,centerY),t.fillStyle="white",t.font="50px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("Coming Soon??",0,0),t.restore()}}},function(t,e,n){const i=n(0),o=n(1);t.exports={initCanvas:function(t){Object.assign(this,o),this.initBase(t),images={logo:new Image,background:new Image},time=0,images.logo.src="./assets/logo.png",images.background.src="./assets/background.png",btnColor="#001D2E",btnTextColor="white",this.canvas.addEventListener("mousemove",t=>{this.objectList.forEach(e=>{e.onmousemove&&e.onmousemove.call(this,t)})}),this.canvas.addEventListener("mousedown",t=>{this.objectList.forEach(e=>{e.onmousedown&&e.onmousedown.call(this,t)})});let e=40,n=40,s={border:{x:120,y:40,w:120,h:40},x1:centerX-120-n,y1:centerY+150-e,x2:centerX+120+n,y2:centerY+150-e+2*n,isInPath:function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},onmousedown:function(t){let e=new i(t.x,t.y);if(s.isInPath(e)){var n=new Event("stageChange");this.canvas.dispatchEvent(n)}},onmousemove:function(t){let e=new i(t.x,t.y);s.isInPath(e)?(this.btnColor="white",this.btnTextColor="black"):(this.btnColor="#001D2E",this.btnTextColor="white")}};this.objectList.push(s)},draw:function(t){time++,this.drawBackground(t),this.drawLogo(t),this.drawStartGame(t),this.drawWave(t,time),time%350>100&&this.drawWave(t,time-100),time%350>200&&this.drawWave(t,time-200)},drawLogo:function(t){t.save(),t.translate(centerX,centerY),t.drawImage(images.logo,-150,-200),t.fill(),t.restore()},drawStartGame:function(t){t.save(),t.translate(centerX,centerY+150);let e=120,n=40,i=120,o=40;t.moveTo(-e,-n),t.lineTo(i,-n),t.arc(e,0,o,-90*degToPi,90*degToPi),t.lineTo(-i,n),t.arc(-e,0,o,90*degToPi,-90*degToPi),t.fillStyle=this.btnColor,t.fill(),t.fillStyle=this.btnTextColor,t.font="50px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("Start Game",0,0),t.strokeStyle="white",t.stroke(),t.restore()},drawText:function(t){t.save(),t.translate(60,750),t.fillStyle="white",t.font="36px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("你身負著運送能量電池的任務",0,0),t.fillText("卻遭到幾何星人的埋伏",0,50),t.fillText("請協助從他們的手中奪回能量電池",0,100),t.restore()},drawBackground:function(t){t.save(),t.beginPath(),t.drawImage(images.background,0,0,ww,wh),t.fill(),t.restore()},drawWave:function(t,e){t.beginPath();let n=2*e%350,i=200+n,o=1-n/350;t.strokeStyle=`rgba(255,255,255,${o})`,t.arc(centerX,centerY,i,0,2*Math.PI),t.stroke()}}}]);
//# sourceMappingURL=build.js.map