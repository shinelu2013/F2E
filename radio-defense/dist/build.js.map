{"version":3,"sources":["webpack:///webpack/bootstrap 52fb7890641df69e5362","webpack:///./js/utils/vec2.js","webpack:///./js/stages/baseStage.js","webpack:///./js/index.js","webpack:///./js/stages ^\\.\\/.*\\.js$","webpack:///./js/stages/playStage.js","webpack:///./js/stages/startStage.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Vec2","constructor","x","y","this","set","move","add","v","sub","mul","length","Math","sqrt","nv","temp","unit","clone","toString","equal","angle","atan2","ww","wh","centerX","centerY","time","canvas","undefined","ctx","images","degToPi","objectList","initBase","PI","width","height","updateFPS","bgColor","console","log","nowStage","stageList","stageRender","initCanvas","document","getElementById","getContext","circle","r","arc","line","v1","v2","moveTo","lineTo","window","innerWidth","innerHeight","removeEventListener","stageChange","addEventListener","update","draw","fillStyle","fillRect","save","restore","requestAnimationFrame","evt","stopPropagation","forEach","page","stage","setInterval","mousePos","keyID","keyCode","which","map","./baseStage.js","./playStage.js","./startStage.js","webpackContext","req","webpackContextResolve","id","Error","keys","resolve","base","assign","translate","font","textAlign","textBaseline","fillText","logo","Image","background","src","btnColor","btnTextColor","obj","onmousemove","onmousedown","border","startButton","w","h","x1","y1","x2","y2","isInPath","event","Event","dispatchEvent","push","drawBackground","drawLogo","drawStartGame","drawWave","drawImage","fill","strokeStyle","stroke","drawText","beginPath","step","alpha"],"mappings":"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","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 52fb7890641df69e5362","// Vec2\r\n\r\nclass Vec2 {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    move(x, y) {\r\n        this.x += x;\r\n        this.y += y;\r\n    }\r\n    add(v) {\r\n        return new Vec2(this.x + v.x, this.y + v.y);\r\n    }\r\n    sub(v) {\r\n        return new Vec2(this.x - v.x, this.y - v.y);\r\n    }\r\n    mul(s) {\r\n        return new Vec2(this.x * s, this.y * s);\r\n    }\r\n    get length() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y);\r\n    }\r\n    set length(nv) {\r\n        let temp = this.unit.mul(nv);\r\n        this.set(temp.x, temp.y);\r\n    }\r\n    clone() {\r\n        return new Vec2(this.x, this.y);\r\n    }\r\n    toString() {\r\n        return `(${this.x}, ${this.y})`;\r\n    }\r\n    equal(v) {\r\n        return this.x == v.x && this.y == v.y;\r\n    }\r\n    get angle() {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n    get unit() {\r\n        return this.mul(1 / this.length);\r\n    }\r\n}\r\n\r\nmodule.exports = Vec2;\n\n\n// WEBPACK FOOTER //\n// ./js/utils/vec2.js","module.exports = {\r\n    ww: 0,\r\n    wh: 0,\r\n    centerX:0,\r\n    centerY:0,\r\n    time: 0,\r\n    canvas: undefined,\r\n    ctx: undefined,\r\n    images:{},\r\n    degToPi:0,\r\n    objectList:[],\r\n    initBase: function(canvas){\r\n        degToPi = Math.PI / 180;   \r\n        this.canvas = canvas;\r\n        ww = canvas.width;\r\n        wh = canvas.height;\r\n        centerX = ww/2;\r\n        centerY = wh/2;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/stages/baseStage.js","//環境變數\r\nvar updateFPS = 30;\r\nvar showMouse = true;\r\nvar time = 0;\r\nvar bgColor = \"#001D2E\";\r\n\r\nconst Vec2 = require('./utils/vec2.js');\r\nconsole.log('******************')\r\n//----------------------------\r\n\r\n//----------------------------\r\n\r\nvar canvas;\r\nvar ctx;\r\nvar ww = 0, wh = 0;\r\nvar degToPi = Math.PI / 180;\r\nvar nowStage = \"startStage\";\r\nvar stageList = [\"startStage\",\"playStage\"];\r\nvar stageRender = {};\r\n\r\n\r\n\r\n//canvas設定\r\nfunction initCanvas() {\r\n    canvas = document.getElementById(\"mycanvas\");\r\n    ctx = canvas.getContext(\"2d\");\r\n\r\n    ctx.circle = function (v, r) {\r\n        ctx.arc(v.x, v.y, r, 0, Math.PI * 2);\r\n    }\r\n    ctx.line = function (v1, v2) {\r\n        ctx.moveTo(v1.x, v1.y);\r\n        ctx.lineTo(v2.x, v2.y);\r\n    }\r\n\r\n    ww = canvas.width = window.innerWidth;\r\n    wh = canvas.height = window.innerHeight;\r\n\r\n    canvas.removeEventListener(\"stageChange\", stageChange);\r\n    canvas.addEventListener(\"stageChange\", stageChange)\r\n}\r\n\r\n//邏輯初始化\r\nfunction init() {\r\n    stageList.forEach(page=>{\r\n        console.log('./stages/' + page + '.js')\r\n        let stage = require(`./stages/${page}.js`);\r\n        stageRender[page] = stage;\r\n        stageRender[page].initCanvas(canvas);\r\n        console.log(`page:${page} `, stageRender[page]);\r\n    })\r\n}\r\n\r\n//遊戲邏輯更新\r\nfunction update() {\r\n    time++;\r\n}\r\n\r\n//畫面更新\r\nfunction draw() {\r\n    //清空背景\r\n    ctx.fillStyle = bgColor;\r\n    ctx.fillRect(0, 0, ww, wh);\r\n\r\n    //-------------------------\r\n    // 在這裡繪製\r\n    ctx.save();\r\n    stageRender[nowStage].draw(ctx);\r\n    ctx.restore();\r\n    //     //計算滑鼠座標\r\n    //     let delta = mousePos.sub(new Vec2(ww/2,wh/2));\r\n    //     let mouseAngle = delta.angle;\r\n    //     let mouseDistance = delta.length;\r\n    \r\n    //-------------------------\r\n    //滑鼠\r\n    // ctx.fillStyle = \"red\";\r\n    // ctx.beginPath();\r\n    // ctx.circle(mousePos, 3)\r\n    // ctx.fill();\r\n\r\n    // drawMouseCursor(ctx);\r\n\r\n    requestAnimationFrame(draw);\r\n}\r\nlet i = 0;\r\nfunction stageChange(evt){\r\n    i++;\r\n    console.log(`call stageChange:${i}`);\r\n    evt.stopPropagation();\r\n    switch(nowStage){\r\n        case \"startStage\":\r\n            nowStage = \"playStage\";\r\n            break;\r\n    }\r\n}\r\n\r\nfunction drawGridLine(ctx){\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    for(x=0;x<ww;x+=50){\r\n        ctx.moveTo(x,0);\r\n        ctx.fillStyle = \"white\";\r\n        ctx.fillText(x,x+5,10);\r\n        ctx.lineTo(x,wh);\r\n        ctx.strokeStyle = \"rgba(255,255,255,0)\";\r\n        ctx.stroke();\r\n    }\r\n    for(y=0;y<wh;y+=50){\r\n        ctx.moveTo(0,y);\r\n        ctx.fillStyle = \"white\";\r\n        ctx.fillText(y,5,y+10);\r\n        ctx.lineTo(ww,y);\r\n        ctx.strokeStyle = \"rgba(255,255,255,0)\";\r\n        ctx.stroke();\r\n    }\r\n    ctx.restore();\r\n}\r\nfunction drawMouseCursor(ctx){\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.translate(mousePos.x, mousePos.y);\r\n    ctx.strokeStyle = \"red\";\r\n    let len = 20;\r\n    ctx.line(new Vec2(-len, 0), new Vec2(len, 0));\r\n    ctx.font = \"20px Arial\";\r\n    ctx.fillStyle = \"red\";\r\n    ctx.fillText(mousePos, 10, -10);\r\n    ctx.rotate(Math.PI / 2);\r\n    ctx.line(new Vec2(-len, 0), new Vec2(len, 0));\r\n    ctx.stroke();\r\n    ctx.restore();\r\n}\r\n\r\n//載入\r\nfunction loaded() {\r\n    console.log(`loaded`)\r\n    initCanvas();\r\n    init();\r\n    requestAnimationFrame(draw);\r\n    setInterval(update, 1000 / updateFPS);\r\n}\r\n\r\n//視窗事件與滑鼠事件\r\nwindow.addEventListener(\"load\", loaded);\r\nwindow.addEventListener(\"resize\", initCanvas);\r\n// //mouse event\r\nvar mousePos = new Vec2(0, 0);\r\nvar mousePosDown = new Vec2(0, 0);\r\nvar mousePosUp = new Vec2(0, 0);\r\n\r\nwindow.addEventListener(\"mousemove\", mousemove);\r\nwindow.addEventListener(\"mousedown\", mousedown);\r\nwindow.addEventListener(\"mouseup\", mouseup);\r\n\r\nfunction mousemove(evt) {\r\n    mousePos.set(evt.x, evt.y);\r\n    // console.log(mousePos);   \r\n}\r\nfunction mousedown(evt) {\r\n    mousePos.set(evt.x, evt.y);\r\n    mousePosDown = mousePos.clone();\r\n}\r\nfunction mouseup(evt) {\r\n    mousePos.set(evt.x, evt.y);\r\n    mousePosUp = mousePos.clone();\r\n}\r\n\r\n\r\nwindow.addEventListener('keydown', keyDown,true);\r\nwindow.addEventListener('keyup', keyUp,true);\r\n\r\nfunction keyDown(evt){\r\n    var keyID = evt.keyCode ? evt.keyCode :evt.which;\r\n    console.log(`KeyDown: ${keyID}`);\r\n}\r\nfunction keyUp(evt){\r\n    var keyID = evt.keyCode ? evt.keyCode :evt.which;\r\n    console.log(`KeyUP: ${keyID}`);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/index.js","var map = {\n\t\"./baseStage.js\": 1,\n\t\"./playStage.js\": 4,\n\t\"./startStage.js\": 5\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/stages ^\\.\\/.*\\.js$\n// module id = 3\n// module chunks = 0","const Vec2 = require('../utils/vec2.js');\r\nconst base = require('./baseStage.js');\r\n\r\nmodule.exports = {        \r\n    initCanvas: function(canvas){\r\n        Object.assign(this, base);\r\n        this.initBase(canvas);        \r\n    },\r\n    draw: function(ctx){                \r\n        time++;\r\n   \r\n        ctx.save();\r\n        ctx.translate(centerX,centerY);\r\n        ctx.fillStyle = \"white\";\r\n        ctx.font = \"50px Arial\";\r\n        ctx.textAlign = \"center\";\r\n        ctx.textBaseline = \"middle\";\r\n        ctx.fillText(\"Coming Soon??\", 0, 0);        \r\n        ctx.restore();\r\n    },   \r\n};\n\n\n// WEBPACK FOOTER //\n// ./js/stages/playStage.js","const Vec2 = require('../utils/vec2.js');\r\nconst base = require('./baseStage.js');\r\n\r\nmodule.exports = {        \r\n    initCanvas: function(canvas){\r\n        Object.assign(this, base);\r\n        this.initBase(canvas);\r\n        \r\n        images = {\r\n            logo: new Image(),\r\n            background: new Image()\r\n        };\r\n        time = 0;\r\n        images.logo.src = \"./assets/logo.png\";\r\n        images.background.src = \"./assets/background.png\";\r\n        \r\n        btnColor= \"#001D2E\";\r\n        btnTextColor=\"white\";\r\n\r\n        this.canvas.addEventListener(\"mousemove\",(evt)=>{\r\n            this.objectList.forEach(obj=>{\r\n                if(obj.onmousemove){\r\n                    obj.onmousemove.call(this, evt);\r\n                }\r\n            })           \r\n        })\r\n        this.canvas.addEventListener(\"mousedown\",(evt)=>{            \r\n            this.objectList.forEach(obj=>{\r\n                if(obj.onmousedown){\r\n                    obj.onmousedown.call(this, evt);\r\n                }\r\n            })           \r\n        })\r\n\r\n        let border = {\r\n            x: 120,\r\n            y: 40,\r\n            w: 120,\r\n            h: 40\r\n        }\r\n        let startButton = {\r\n            border:{\r\n                x: 120,\r\n                y: 40,\r\n                w: 120,\r\n                h: 40\r\n            },\r\n            x1:centerX-border.x-border.h,\r\n            y1:centerY+150-border.y,\r\n            x2:centerX + border.w + border.h,\r\n            y2:centerY+150-border.y + border.h*2,\r\n            isInPath: function(mousePos){\r\n                if(mousePos.x >= this.x1 && mousePos.x <= this.x2 &&\r\n                    mousePos.y >= this.y1 && mousePos.y <= this.y2){\r\n                        return true;\r\n                }else{\r\n                    return false;\r\n                }    \r\n            },\r\n            onmousedown: function(evt){\r\n                let mousePos = new Vec2(evt.x,evt.y);\r\n                if(startButton.isInPath(mousePos)){\r\n                    var event = new Event('stageChange');\r\n                    this.canvas.dispatchEvent(event);\r\n                }   \r\n            },\r\n            onmousemove: function(evt){\r\n                let mousePos = new Vec2(evt.x,evt.y);\r\n                if(startButton.isInPath(mousePos)){\r\n                    this.btnColor = \"white\";\r\n                    this.btnTextColor = \"black\";\r\n                }else{\r\n                    this.btnColor = \"#001D2E\";      \r\n                    this.btnTextColor = \"white\";\r\n                } \r\n            }\r\n        }\r\n        \r\n        this.objectList.push(startButton);\r\n    },\r\n    draw: function(ctx){                \r\n        time++;   \r\n        this.drawBackground(ctx);\r\n        this.drawLogo(ctx);\r\n        this.drawStartGame(ctx);\r\n\r\n        // this.drawText(ctx);\r\n        // this.drawBackground(ctx);\r\n\r\n        //draw wave\r\n        this.drawWave(ctx,time);\r\n        if(time%350 > 100){\r\n            this.drawWave(ctx,time-100);\r\n        }\r\n        if(time%350 > 200){\r\n            this.drawWave(ctx,time-200);\r\n        }    \r\n    },\r\n    \r\n    drawLogo: function(ctx){\r\n        ctx.save();\r\n        ctx.translate(centerX, centerY);\r\n        // ctx.beginPath();\r\n        ctx.drawImage(images.logo, -150,-200);\r\n        ctx.fill();\r\n        ctx.restore();\r\n    },\r\n    drawStartGame: function(ctx){\r\n        ctx.save();\r\n        ctx.translate(centerX, centerY + 150);\r\n        //繪製start game邊框\r\n        let border = {\r\n            x: 120,\r\n            y: 40,\r\n            w: 120,\r\n            h: 40\r\n        }       \r\n        ctx.moveTo(-border.x, -border.y);\r\n        ctx.lineTo(border.w, -border.y);\r\n        ctx.arc(border.x, 0, border.h, -90 * degToPi, 90 * degToPi);\r\n        ctx.lineTo(-border.w, border.y);\r\n        ctx.arc(-border.x, 0, border.h, 90 * degToPi, -90 * degToPi);\r\n        ctx.fillStyle = this.btnColor;\r\n        ctx.fill();\r\n\r\n        //文字\r\n        ctx.fillStyle = this.btnTextColor;\r\n        ctx.font = \"50px Arial\";\r\n        ctx.textAlign = \"center\";\r\n        ctx.textBaseline = \"middle\";\r\n        ctx.fillText(\"Start Game\", 0, 0);\r\n\r\n        ctx.strokeStyle = \"white\";\r\n        ctx.stroke();\r\n        ctx.restore();\r\n\r\n        \r\n    },\r\n    drawText: function(ctx){\r\n        ctx.save();\r\n        ctx.translate(60,750);\r\n        ctx.fillStyle = \"white\";\r\n        ctx.font = \"36px Arial\";\r\n        ctx.textAlign = \"center\";\r\n        ctx.textBaseline = \"middle\";\r\n        ctx.fillText(\"你身負著運送能量電池的任務\", 0, 0);\r\n        ctx.fillText(\"卻遭到幾何星人的埋伏\", 0, 50);\r\n        ctx.fillText(\"請協助從他們的手中奪回能量電池\", 0, 100);\r\n        ctx.restore();\r\n    },\r\n    drawBackground: function(ctx){\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.drawImage(images.background, 0,0,ww,wh);\r\n        ctx.fill();\r\n        ctx.restore();\r\n    },\r\n    drawWave: function(ctx,time){\r\n        ctx.beginPath();\r\n        let maxr = 350;\r\n        let step = time*2%maxr;\r\n        let r = 200 + step;\r\n        let alpha = 1- step/maxr;\r\n        ctx.strokeStyle = `rgba(255,255,255,${alpha})`;\r\n        ctx.arc(centerX,centerY , r, 0, Math.PI*2);\r\n        ctx.stroke();\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./js/stages/startStage.js"],"sourceRoot":""}